version: '3'
services:
  graph-server:
    build:
      context: .
      dockerfile: Dockerfile-server
      args:
        - VERSION_OPG=21.1.0
        - VERSION_JDK=11.0.10
    image: graph-server:21.1.0
    ports:
      - "7007:7007"
    depends_on:
      - "database"
    volumes:
      - ./graphs:/graphs
      - ./pgx.conf:/etc/oracle/graph/pgx.conf
    networks:
      - network
  database:
    image: oracle/database:19.3.0-ee
    ports:
      - "1521:1521"
    volumes:
      - ./graphs:/graphs
      - ./scripts:/home/oracle/scripts
    environment:
      - ORACLE_PWD=WELcome123##
    networks:
      - network
  jupyter:
    user: root
    build:
      context: .
      dockerfile: Dockerfile-jupyter
      args:
        - VERSION=21.1.0
    image: jupyter:21.1.0
    volumes:
     - ./graphs:/graphs
     - ./jupyter/work:/home/jovyan/work
    ports:
      - "8888:8888"
    networks:
      - network
networks:
  network:
